cmake_minimum_required(VERSION 3.15)
project(CalderaEngine)

set(CMAKE_CXX_STANDARD 23)

# GLFW and OpenGL
find_package(OpenGL REQUIRED)
find_package(assimp REQUIRED)
find_package(glm QUIET)

# ImGui sources
file(GLOB IMGUI_SRC
    "imgui/*.cpp"
    "imgui/backends/imgui_impl_glfw.cpp"
    "imgui/backends/imgui_impl_opengl3.cpp"
)

# Renderer sources
set(RENDERER_SRC
    renderer/Shader.cpp
    renderer/Camera.cpp
    renderer/Mesh.cpp
    renderer/Model.cpp
    renderer/Renderer.cpp
    renderer/Texture.cpp
)

# Engine Sources
set(ENGINE_SRC
    engine/Character.cpp
    engine/InputSystem.cpp
    engine/PlayerController.cpp
    engine/GameInputSystem.cpp
)

# Misc Sources
set(MISC_SRC
    misc/stb_image.h
)

# UI Sources
set(UI_SRC
    ui/SimpleUI.cpp
)

# Note: our main file is CalderaEngine.cpp
add_executable(CalderaEngine CalderaEngine.cpp ${IMGUI_SRC} ${RENDERER_SRC} ${ENGINE_SRC} ${MISC_SRC} ${UI_SRC})

target_include_directories(CalderaEngine PRIVATE
    imgui
    imgui/backends
    renderer
    engine
    ui
    misc
)

target_link_libraries(CalderaEngine PRIVATE
    "-framework Cocoa"
    "-framework OpenGL"
    "-framework IOKit"
    "-framework CoreVideo"
    glfw
    GLEW
    assimp
)
